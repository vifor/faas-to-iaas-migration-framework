# FaaS Load Test Results - 2025-11-16_20-52-47

## Test Configuration

- **Start Time**: 2025-11-16 20:50:00
- **Test Type**: Load Test (2m warmup + 5m load + 2m cooldown)
- **Configuration File**: load-test.json
- **Target Users**: 10-25 VUs
- **Duration**: 9 minutes total
- **Test Suite**: test-suite.js

## Test Results Summary

‚ö†Ô∏è **TEST FAILED - Configuration Issues Detected**

### üîç Issues Identified:

#### 1. DNS Resolution Errors

```
WARN[0XXX] Request Failed error="Post \"https://dev-api.petstore.com/admin/franchise\": lookup dev-api.petstore.com: no such host"
```

- **Problem**: Test suite is using incorrect URL `dev-api.petstore.com`
- **Expected**: Should use `https://5brhnloiod.execute-api.sa-east-1.amazonaws.com/main`

#### 2. Authentication Failures

```
ERRO[0XXX] Authentication failed for user vicky: 403 undefined
ERRO[0XXX] Authentication failed for user testuser2@example.com: 403 undefined
ERRO[0XXX] Authentication failed for user manager1@example.com: 403 undefined
```

- **Problem**: JWT authentication failing with Status 403
- **Root Cause**: Either invalid Cognito configuration or test users not properly set up

### üìä Observed Performance Metrics:

- **Test Duration**: ~5 minutes before termination
- **DNS Lookup Failures**: Continuous (100% failure rate)
- **Authentication Success Rate**: 0%
- **Valid API Calls**: 0 (due to configuration issues)

### üéØ Load Test Configuration Analysis:

#### Stages (from load-test.json):

1. **Ramp-up**: 2 minutes to 10 users
2. **Load Phase**: 5 minutes at 25 users
3. **Ramp-down**: 2 minutes to 0 users

#### Thresholds:

- `http_req_duration`: p(95) < 2000ms
- `http_req_failed`: rate < 0.1 (10% failure tolerance)
- `http_reqs`: rate > 10 requests/second
- `admin_operation_duration`: p(95) < 3000ms
- `store_operation_duration`: p(95) < 2000ms

### üîß Configuration Issues Detected:

1. **Environment Variables**: The test suite is not reading environment variables correctly
2. **Base URL Configuration**: Hard-coded URLs pointing to non-existent domains
3. **Authentication Setup**: Cognito JWT flow needs proper configuration
4. **Test Data**: Users referenced in test are not properly configured in Cognito

### ‚úÖ What Worked:

- K6 load testing infrastructure is functional
- Test suite structure is complete
- Load test configuration (stages, thresholds) is properly defined
- Environment variable loading mechanism exists

### üö® Immediate Actions Needed:

1. Fix base URL configuration in test-suite.js
2. Verify Cognito user pool setup and test user credentials
3. Update environment variables to match actual API endpoints
4. Validate JWT authentication flow

### üîó Related Files:

- `load-test.json` - Load test configuration ‚úÖ
- `test-suite.js` - Main test file ‚ùå (needs URL fix)
- `.env` - Environment variables ‚ö†Ô∏è (partially configured)
- `config/auth.js` - Authentication logic ‚ùå (needs debugging)

## Conclusion

The load testing infrastructure is correctly set up, but configuration issues prevent successful execution. The primary problems are:

1. **Wrong API URLs** in the test suite
2. **Authentication configuration** needs validation
3. **Environment variable** loading needs verification

**Next Steps**: Fix configuration issues and re-run the load test with corrected settings.

---

_Test executed on: 2025-11-16 20:52:47_
_Framework: K6 Load Testing Suite for FaaS vs IaaS Migration_
